## 简介

<!-- `immer` 帮我们始终创建一个更改后的副本。 -->

`javaScript`中，我们对 **对象（数组）**进行操作，会直接在原对象上进行更改。这种特性给我们检测对象是否改变带来了很大的不便。假设这样一种情况：你需要判断一个数组是否是初始数组，若不是，则渲染最新的数据：

<<< @/codes/react-demo/src/pages/redux/immer/demo1.js

但是在我们向数组内 `push` 了一个新的数据后，我们并没有很好的办法判断新的数组是否和原来的数组一致。这使我们常常要浅克隆一个新数组，在新数组上进行数据的更新

<<< @/codes/react-demo/src/pages/redux/immer/demo2.js

但这样说也不是最好的办法，显然我们没有办法判断是否改变了数组（对象），只要浅克隆后，得到的数组就已经是一个新的数组了。

这时候就要请出我们的主角 `immer` ，它完美的解决了我们的需求。我们只需要做两件事：
1.  传入初始数据作为 `produce` 函数的第一个参数
2.  第二个参数会给我们一个回调函数，回调函数提供一个参数 `draft` ，它是初始数据的映射，如果我们改变了它，会生成一个新的数据，否则则会返回初始数据。

<<< @/codes/react-demo/src/pages/redux/immer/demo3.js


