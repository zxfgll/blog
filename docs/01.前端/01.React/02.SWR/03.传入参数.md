---
title: 传入参数
date: 2022-04-25 22:04:38
permalink: /pages/bfd9ad/
categories:
  - 前端
  - React
  - SWR
tags:
  - 
---
# 重复请求去重的坑

`swr`默认具有`请求自动去重`的功能，这是它的卖点之一。但这种去重基于的`key值`通常是`url地址`。
```js
// useSwr的第一个参数会作为去重的key值，通常会作为url地址传入fetcher
useSWR('/api/user', fetcher) 
```

那么如果我们要给我们的`请求头header`增加一个授权的`token`时，这是一种**错误写法**：
```js
useSWR('/api/user', url => fetchWithToken(url, token))
```
因为`缓存key`值依然是`/api/user`，swr判断它是重复的请求，依然返回给我们缓存中的数据


# 数组传参
我们需要使用一个数组作为参数`key`，以此来达到我们的效果

```js
const { data: user } = useSWR(['/api/user', token], fetchWithToken)
```
