---
title: 简介
date: 2022-05-24 20:15:36
permalink: /pages/79e6bf/
categories:
  - 前端
  - Vue
  - vuex
tags:
  - 
---

## 简介

`vuex` 是 `vue`官方提供的状态管理工具。其借鉴了 `Flux、redux和The Elm Architecture` ，由于笔者只对 `redux` 有一定了解，因此会以 `redux` 与 `vuex` 的相似点作为学习的切入点。

## 概念等式

-   `mutation` == `reducer`
-   `store.commit` == `store.dispatch`

## demo

定义store并挂载:

```js
import { createApp } from 'vue'
import App from './App.vue'
import {createStore} from 'vuex'
// 创建一个新的 store 实例
const store = createStore({
    state () {
      return {
        count: 0
      }
    },
    mutations: {
      increment (state) {
        state.count++  // 自带immer
      }
    }
  })
  

createApp(App).use(store).mount('#app')

```

挂载store后可以通过 `this.$store`来访问store对象 取 `vuex` 中的数据的时候，需要使用 `computed` 进行依赖的挂载，否则store数据的更改不会直接影响视图的变化：


```vue
<template>
    <div>
        {{ count }}
        <button @click="add">add</button>
    </div>
</template>

<script>
export default {
    mounted() {
        console.log(this.$store);
    },
    computed: {
        count() {
            return this.$store.state.count // 挂载依赖，会更新
        }
    },
    // data(){
    //     return {
    //         count : this.$store.state.count // 不会更新
    //     }
    // },
    methods: {
        add() {
            this.$store.commit('increment')
            console.log(this.$store.state.count);
        }
    }
}
</script>

```

![](https://linyc.oss-cn-beijing.aliyuncs.com/vuex.gif)

